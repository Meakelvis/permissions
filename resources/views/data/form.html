<!DOCTYPE html>
<html lang="en">
    <head>
        <!-- Required meta tags -->
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />

        <!-- Bootstrap CSS -->
        <link
            href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.1/dist/css/bootstrap.min.css"
            rel="stylesheet"
            integrity="sha384-+0n0xVW2eSR5OomGNYDnhzAbDsOXxcvSN1TPprVMTNDbiYZCxYbOOl7+AMvyTG2x"
            crossorigin="anonymous"
        />

        <title>Hello, world!</title>
    </head>
    <body>
        <div class="container">
            <form action="">
                <table class="table table-bordered border-dark">
                    <tbody>
                        <tr>
                            <td class="table-secondary">
                                <strong>Name of the Applicant</strong>
                            </td>
                            <td>
                                <textarea
                                    class="form-control"
                                    id="applicant_name"
                                    name="applicant_name"
                                    style="
                                        width: 100%;
                                        height: 100%;
                                        border: none;
                                    "
                                >
Mr. Muhoozi Christopher Gombekwa
                                </textarea>
                            </td>
                            <td class="table-secondary" rowspan="3">
                                <strong>Travel Destination</strong>
                            </td>
                            <td class="table-secondary" rowspan="2">
                                <strong>From</strong>
                            </td>
                            <td rowspan="2">
                                <input
                                    style="width: 100%; border: none"
                                    class="form-control"
                                    type="text"
                                    name="from"
                                    id="from"
                                    value="Kampala"
                                />
                            </td>
                        </tr>
                        <tr>
                            <td class="table-secondary">
                                <strong>Title</strong>
                            </td>
                            <td>
                                <input
                                    style="width: 100%; border: none"
                                    class="form-control"
                                    type="text"
                                    name="title"
                                    id="title"
                                    value="Director"
                                />
                            </td>
                        </tr>
                        <tr>
                            <!-- <td colspan="2">Larry the Bird</td> -->
                            <td class="table-secondary">
                                <strong>Date of Application</strong>
                            </td>
                            <td>
                                <input
                                    style="width: 100%; border: none"
                                    class="form-control"
                                    type="date"
                                    name="date"
                                    id="date"
                                />
                            </td>
                            <td class="table-secondary"><strong>To</strong></td>
                            <td>
                                <input
                                    style="width: 100%; border: none"
                                    class="form-control"
                                    type="text"
                                    name="to"
                                    id="to"
                                    value="Bushenyi"
                                />
                            </td>
                        </tr>
                        <tr>
                            <td class="table-secondary">
                                <strong>Address</strong>
                            </td>
                            <td colspan="4">
                                <input
                                    style="width: 100%; border: none"
                                    class="form-control"
                                    type="text"
                                    name="address"
                                    id="address"
                                    value="Makerere University, Kampala"
                                />
                            </td>
                        </tr>
                        <tr>
                            <td class="table-secondary">
                                <strong>Purpose of the Travel</strong>
                            </td>
                            <td colspan="4">
                                <textarea
                                    class="form-control"
                                    id="purpose"
                                    name="purpose"
                                    style="
                                        width: 100%;
                                        height: 100%;
                                        border: none;
                                    "
                                >
To Participate in preparation for the burial of Gombekwa (father) in Kyeizooba Igara Bushenyi
                                </textarea>
                            </td>
                        </tr>
                        <tr>
                            <td class="table-secondary">
                                <strong>Vehicle No.</strong>
                            </td>
                            <td colspan="4">
                                <input
                                    style="border: none"
                                    class="form-control"
                                    type="number"
                                    name="no_of_vehicles"
                                    id="address"
                                    value="01"
                                />
                            </td>
                        </tr>

                        <!-- occupants table -->
                        <table
                            id="occupants"
                            class="table table-bordered border-dark"
                        >
                            <tbody>
                                <tr>
                                    <td class="table-secondary" colspan="3">
                                        <strong
                                            >Occupants (Depending on the size of
                                            the Vehicle)</strong
                                        >
                                    </td>
                                    <td colspan="2"></td>
                                </tr>
                                <tr>
                                    <td><strong>NO.</strong></td>
                                    <td><strong>NAME</strong></td>
                                    <td><strong>MOTOR VEHICLE NO.</strong></td>
                                    <td colspan="2">
                                        <strong>NAME OF DRIVER</strong>
                                    </td>
                                </tr>

                                <!-- make an ajax request HERE to loop all occupants
                                    attached to the record from db -->

                                <tr id="active_row">
                                    <td>1.</td>
                                    <td>
                                        <input
                                            style="width: 100%; border: none"
                                            class="form-control"
                                            type="text"
                                            name="occupant_name"
                                            id="occupant_name"
                                            value=""
                                        />
                                    </td>
                                    <td>
                                        <input
                                            style="width: 100%; border: none"
                                            type="text"
                                            class="form-control"
                                            name="motor_vehicle_no"
                                            id="motor_vehicle_no"
                                            value="UBA ..."
                                        />
                                    </td>
                                    <td colspan="">
                                        <input
                                            style="width: 100%; border: none"
                                            class="form-control"
                                            type="text"
                                            name="driver_name"
                                            id="driver_name"
                                            value="Muhoozi Christopher"
                                        />
                                    </td>
                                    <td>
                                        <div class="btn btn-success" id="add">
                                            ADD
                                        </div>
                                    </td>
                                </tr>
                            </tbody>
                        </table>

                        <table class="table table-bordered border-dark">
                            <tr>
                                <td class="table-secondary">
                                    <strong>Validity</strong>
                                </td>
                                <td colspan="2">
                                    <strong>From:</strong>
                                    <input
                                        style="width: 100%; border: none"
                                        class="form-control"
                                        type="date"
                                        name="valid_from"
                                        id="valid_from"
                                    />
                                </td>
                                <td colspan="2">
                                    <strong>To:</strong>
                                    <input
                                        style="width: 100%; border: none"
                                        class="form-control"
                                        type="date"
                                        name="valid_from"
                                        id="valid_from"
                                    />
                                </td>
                            </tr>
                        </table>
                    </tbody>
                </table>

                <div class="d-flex">
                    <button type="submit" class="btn btn-primary me-4">
                        Submit Application
                    </button>
                    <a href="" class="btn btn-secondary"> Cancel </a>
                </div>
            </form>
        </div>

        <!-- Optional JavaScript; choose one of the two! -->

        <!-- Option 1: Bootstrap Bundle with Popper -->
        <script
            src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.1/dist/js/bootstrap.bundle.min.js"
            integrity="sha384-gtEjrD/SeCtmISkJkNUaaKMoLD0//ElJ19smozuHV6z3Iehds+3Ulb9Bn9Plx0x4"
            crossorigin="anonymous"
        ></script>
        <script
            src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"
            integrity="sha512-894YE6QWD5I59HgZOGReFYm4dnWc1Qt5NtvYSaNcOP+u1T9qYdvdihz0PPSiiqn/+/3e7Jo4EaG7TubfWGUrMQ=="
            crossorigin="anonymous"
            referrerpolicy="no-referrer"
        ></script>

        <script>
            $("#add").click((e) => {
                e.preventDefault();

                let occupantName = $("#occupant_name").val();
                let motorVehicleNo = $("#motor_vehicle_no").val();
                let driverName = $("#driver_name").val();
                let applicantName = $("#applicant_name").val();

                console.log(
                    occupantName,
                    motorVehicleNo,
                    driverName,
                    applicantName
                );

                /**
                 * Add occupant data to db
                 *
                 * Make ajax request to post data to db
                 * use applicant name as foreign key constraint when getting data
                 * */

                /**
                 * Repopulate the occupants table
                 *
                 * After adding data to db,
                 * make ajax call to get occupant data
                 * use applicant name as search parameter
                 * */
            });
        </script>
    </body>
</html>
